<div class="<%= prefix %>-widget <%= prefix %>-result-widget <%= prefix %>-result-rank-widget <%= prefix %>-widget-rank-<%= name %>">

  <div class="<%= prefix %>-result-widget-head">
    <h3><%= title %></h3>
    <% if (typeof(subtitle) != "undefined") { %>
    <div class="<%= prefix %>-result-widget-subtitle"><%= subtitle %></div>
    <% } %>
  </div>
  
  <% if (sortOptions) { %>
  <div class="<%= prefix %>-result-widget-ctrl">
    <div class="<%= prefix %>-result-bar">
      <div class="<%= prefix %>-result-bar-title <%= prefix %>-result-bar-sort-title">
        <%= i18n.pgettext("dashboard-page", "Ordered by:") %>
      </div>
      <div class="<%= prefix %>-result-bar-ctrl <%= prefix %>-result-bar-sort-ctrl">
        <% if (sortOptions.length > 1) { %>
        <select>
          <% _.each(sortOptions, function (option) { %>
          <option value="<%= option.key %>"<%= option.key == sortIndex ? "selected" : "" %>><%= option.label %></option>
          <% }); %>
        </select>
        <% } else { %>
        <span><%= sortOptions[0].label %></span>
        <% } %>
      </div>        
    </div>
  </div>
  <% } %>

  <% if (rankedItems.items.length < rankedItems.count && !fullResultsResource) { %>
     <div class="<%= prefix %>-result-widget-ctrl <%= prefix %>-result-widget-count">
       <%= i18n.pgettext("dashboard-page", "Showing first <{length}> of <{count}> results.")
           .replace("<{length}>", rankedItems.items.length)
           .replace("<{count}>", rankedItems.count)
           %>
     </div>
  <% } %>

  <div class="<%= prefix %>-result-widget-bar-title">
    <div class="<%= prefix %>-result-bar">
      <div class="<%= prefix %>-result-bar-text"><%= itemLabel %></div>
      <div class="<%= prefix %>-result-bar-value"><%= valueLabel || "" %></div>
    </div>
  </div>

  <div class="<%= prefix %>-result-widget-bar-list">
    <% _.forEach(rankedItems.items, function (item, i) { %>
    <div class="<%= prefix %>-result-bar">
      <div class="<%= prefix %>-result-bar-text"><%= item.label %></div>
      <% if (valueLabel) { %>
      <div class="<%= prefix %>-result-bar-value">
        <%= valueFormat ? valueFormat(item[value]) : item[value] %>
      </div>
      <div class="<%= prefix %>-result-bar-bar <%= prefix %>-graphic-<%= cssKey %>"></div>
      <% } %>
    </div>
    <% }) %>
  </div>
  
  <div class="<%= prefix %>-result-widget-action-list">
    <div class="<%= prefix %>-widget-action <%= prefix %>-widget-action-full">
      <a 
        <% if (fullResultsResource) { %>
        <%= prefix %>-resource="<%= fullResultsResource %>"
        <% } else { %>
        style="visibility: hidden;"
        <% } %>
        ><%= i18n.pgettext("dashboard-page", "See full results") %></a>
    </div>
    <!-- <div class="<%= prefix %>-widget-action <%= prefix %>-widget-action-share <%= prefix %>-disabled"> -->
    <!--   <i class="fa fa-share-alt"></i> -->
    <!--   <a href=""><%= i18n.pgettext("dashboard-page", "Share this") %></a> -->
    <!-- </div> -->
    <!-- <div class="<%= prefix %>-widget-action <%= prefix %>-widget-action-download <%= prefix %>-disabled"> -->
    <!--   <i style="visibility: hidden;" class="fa fa-save"></i> -->
    <!--   <a style="visibility: hidden;" href=""><%= i18n.pgettext("dashboard-page", "Download full data") %></a> -->
    <!-- </div> -->
  </div>
</div>
